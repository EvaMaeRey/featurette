---
title: "#TidyTuesday 'Taylor Swift' featurette"
subtitle: "featuring [{ggcirclepack}](https://github.com/EvaMaeRey/ggcirclepack) which is experimental"
date: "`r format(Sys.time(), '%B %d, %Y')`"
author: ""
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, hygge, ninjutsu]
    nature:
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---




```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F, cache = T)
# remotes::install_github("EvaMaeRey/ggcirclepack")
```

---


# What keys does Taylor Swift write in the most?

---




--

**key**: The estimated overall key of the track. Integers map to pitches using standard Pitch Class notation . E.g. 0 = C, 1 = C♯/D♭, 2 = D, and so on. If no key was detected, the value is -1.


---

```{r}
library(tidyverse)
read.csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv") ->
  songs
```

`r flipbookr::chunk_reveal("feature", widths = c(1,1))`

---

```{r feature, echo = F, out.width="70%", fig.align='center'}
songs %>% 
  filter(track_artist |> 
           str_detect("Taylor Swift")) %>% 
  mutate(key = factor(key, levels = -1:11, 
                      labels = c('none', 'C', 'C#/Db', 'D', 'D#/Eb', "E",
                                 "F", "F#/Gb", "G", "G#/Ab", "A", "A#/Bb", "B"))) %>% 
  filter(mode == 1) %>% # mode 
  ggplot() + 
  aes(x = key) + 
  geom_bar() + 
  ggbarlabs::geom_barlab_count() +
  ggbarlabs::defaults_ggbarlabs()
```




### try it (highly experimental)

```{r}
remotes::install_github("EvaMaeRey/ggcirclepack")
```

### Contribute/report issues/comment

- https://github.com/EvaMaeRey/ggcirclepack/issues/

### Check out {packcircles} which does the computation in ggcirclepack

- https://github.com/mbedward/packcircles


